var j$=jQuery,thisWindow=j$(window),masonryContainer,mqWidth=1100;j$.fn.dropDown=function(a){a=j$.extend({speed:200},a||{});this.each(function(){var c=this,g=1000;function f(i){if(i.nodeName.toLowerCase()==="li"){var h=j$("> ul",i);return h[0]?h[0]:null}else{return i}}function d(h){if(h.nodeName.toLowerCase()==="ul"){return j$(h).parents("li")[0]}else{return h}}function e(){var h=f(this);if(!h){return}j$.data(h,"cancelHide",false);if(!j$.data(h,"cancelHide")){j$(h).removeClass("show")}}function b(){var i=f(this);if(!i){return}j$.data(i,"cancelHide",true);j$(i).css({zIndex:g++}).addClass("show");if(this.nodeName.toLowerCase()==="ul"){var h=d(this);j$(h).addClass("hover");j$("> a",h).addClass("hover")}}j$("ul, li",this).hover(b,e);j$("li",this).hover(function(){j$(this).addClass("hover");j$("> a",this).addClass("hover")},function(){j$(this).removeClass("hover");j$("> a",this).removeClass("hover")})})};function getElementScreenPosition(c){var a=document.documentElement;var b=c.getBoundingClientRect();var e=b.left-a.clientLeft;var d=b.top-a.clientTop;return{left:e,top:d}}function getElementPosition(c){var b=document.documentElement;var a=document.body;var g=(a.scrollLeft||b.scrollLeft);var f=(a.scrollTop||b.scrollTop);var h=getElementScreenPosition(c);var e=h.left+g;var d=h.top+f;return{left:e,top:d}}function get_sns_share_count(b,c){if(j$("#"+c+" .bg-likes")[0]){j$.ajax({url:"https://graph.facebook.com/"+encodeURIComponent(b),dataType:"jsonp",success:function(d){j$("#"+c+" .bg-likes .share-num").removeClass("dp_spinner").text(d.shares||0)}})}if(j$("#"+c+" .bg-hatebu")[0]){if(document.location.protocol!="https:"){j$.ajax({url:"http://api.b.st-hatena.com/entry.count?url="+encodeURIComponent(b),dataType:"jsonp",success:function(d){j$("#"+c+" .bg-hatebu .share-num").removeClass("dp_spinner").text(d||0)}})}}if(j$("#"+c+" .bg-pocket")[0]){var a="https://widgets.getpocket.com/v1/button?label=pocket&count=vertical&v=1&url="+encodeURIComponent(b);j$.get(a,function(e){var d=j$(e.responseText).find("#cnt").text();j$("#"+c+" .bg-pocket .share-num").removeClass("dp_spinner").text(d||0)})}}if("ontouchstart" in window){document.documentElement.className=document.documentElement.className+" touch"}if(!j$("html").hasClass("touch")){j$(".pl_img").css("background-attachment","fixed")}function backgroundResize(){var a=j$(window).height();j$(".pl_img").each(function(d){var l=j$(this);var b=l.width();var k=l.height();var f=l.attr("data-img-w");var c=l.attr("data-img-h");var e=f/c;var j=parseFloat(l.attr("data-diff"));j=j?j:600;var h=0;if(l.hasClass("pl_img")&&!j$("html").hasClass("touch")){var g=k>a?k:a;h=a-k}c=k+h+j;f=c*e;if(b>f){f=b;c=f/e}l.data("resized-imgW",f);l.data("resized-imgH",c);l.css("background-size",f+"px "+c+"px")})}j$(window).resize(backgroundResize);j$(window).focus(backgroundResize);backgroundResize();function parallaxPosition(f){var c=j$(window).height();var a=j$(window).scrollTop();var b=a+c;var d=(a+b)/2;j$(".pl_img").each(function(k){var r=j$(this);var q=r.height();var o=r.offset().top;var e=o+q;if(b>o&&a<e){var m=r.data("resized-imgW");var h=r.data("resized-imgH");var j=0;var n=-h+c;var g=q<c?h-q:h-c;o=o-g;e=e+g;var p=j+(n-j)*(d-o)/(e-o);var l=r.attr("data-oriz-pos");l=l?l:"50%";j$(this).css("background-position",l+" "+p+"px")}})}if(!j$("html").hasClass("touch")){j$(window).resize(parallaxPosition);j$(window).scroll(parallaxPosition);parallaxPosition()}j$(function(){j$(".dp-slide").prev().css("cursor","pointer");j$(".dp-slide").prev().click(function(){var a=j$(this).next();if(a[0]){a.slideToggle()}})});function floatingWidget(){if(j$("#sidebar")[0]){if(j$("#dp_fix_widget")[0]){var g=j$("#dp_fix_widget");var l=-180;var m=0;var a=0;var i=document.getElementById("sidebar");var h=document.getElementById("footer");var e=document.getElementById("dp_fix_widget");var c=(document.getElementById("widget-container-bottom")!==null)?document.getElementById("widget-container-bottom"):h;var f=document.getElementById("content");var d=i.offsetHeight+i.offsetTop+e.offsetHeight+l;var b=document.documentElement.clientHeight;var k=0;var j=0;if(c){j=c.offsetHeight+h.offsetHeight+l+m}else{j=h.offsetHeight+l+m}thisWindow.scroll(function(){a=thisWindow.scrollTop()+e.offsetHeight;if(thisWindow.scrollTop()>d&&thisWindow.width()>1130){if(a>=c.offsetTop-m){k=b-(c.offsetTop-thisWindow.scrollTop());if((j>window.innerHeight)&&(i.offsetHeight>f.offsetHeight)){g.css({position:"relative",top:"auto",bottom:"auto"})}else{g.css({position:"fixed",top:"auto",bottom:k})}}else{g.css({position:"fixed",top:"60px",bottom:"auto"})}}if(thisWindow.scrollTop()<=d||thisWindow.width()<=1130){g.css({position:"relative",top:"auto",bottom:"auto"})}})}}}function showToolTip(c,e,d,b){var a=j$(c);a.each(function(){var i=null;var h=e||34;var g=d||24;var j=j$(this).attr("title");var f='<div class="tooltip-div"><span class="tooltip-msg">'+j+"</span></div>";if(b){f='<div class="tooltip-div"><span class="tooltip-arrow"></span><span class="tooltip-msg">'+j+"</span></div>"}j$(this).mouseover(function(){j$(this).removeAttr("title");if(j$(this)[0].nodeName==="IMG"){j$(this).after(f)}else{j$(this).append(f)}}).mousemove(function(k){j$(this).find(".tooltip-div").css({top:k.offsetY+g+"px",left:k.offsetX+h+"px"})}).mouseout(function(){j$(this).attr("title",j);if(j$(this)[0].nodeName==="IMG"){j$(".tooltip-div").remove()}else{j$(this).find(".tooltip-div").remove()}})})}function resetGlobalMenu(){var c=j$("#header_container");var a="#global_menu_nav";var b="expand_global_menu_li";var e="mq_sub_li";var d="";if(thisWindow.width()<=mqWidth){j$(a).addClass("mq-mode");if(!j$(a+" li").hasClass(b)){j$(a+" li").addClass(b);j$(a+" li").find("ul").each(function(){j$(this).addClass("bd-none");j$("> li .menu-item",this).addClass("bd-none");j$(this).parent("li:last").prepend('<i class="'+e+' icon-angle-down"></i>')});j$("."+e).click(function(){var f=j$(this).siblings("ul.sub-menu");if(f.is(":animated")){f.stop()}if(f.is(":visible")){j$(this).addClass("icon-angle-down");j$(this).removeClass("icon-angle-up")}else{j$(this).addClass("icon-angle-up");j$(this).removeClass("icon-angle-down")}f.slideToggle(200)})}}else{j$(a).removeClass("mq-mode");j$("."+e).remove();j$(a+" .sub-menu").removeClass("bd-none");j$(a+" li .item-menu").removeClass("bd-none");j$(a+" li").removeClass(b);j$("."+e).remove();j$(a).dropDown()}}function showGlobalMenuCaption(){j$("#global_menu_ul:not(.mb) > li > a").hover(function(){var b=j$(this).find(".menu-title");var a=j$(this).find(".menu-caption");if(a[0]){b.stop().animate({opacity:0.01},300,"easeOutQuart");a.stop().animate({opacity:1,right:0},300,"easeOutQuart")}},function(){var b=j$(this).find(".menu-title");var a=j$(this).find(".menu-caption");if(a[0]){b.stop().animate({opacity:1},300,"easeOutQuart");a.stop().animate({opacity:0,right:"-100px"},300,"easeOutQuart")}})}function dpTabWidget(){j$("div.first_tab").show();j$("li.dp_tab_title").click(function(){if(j$(this).hasClass("active_tab")){return}var a=j$(this).parent(".dp_tab_widget_ul");var b=j$(this).attr("id");a.children("li").removeClass("active_tab");a.children("li").addClass("inactive_tab");j$(this).removeClass("inactive_tab");j$(this).addClass("active_tab");a.next(".dp_tab_contents").children("div").hide();if(a.next(".dp_tab_contents").children("#"+b+"_content .widget").children().is(":hidden")){a.next(".dp_tab_contents").children("#"+b+"_content .widget").children().show()}a.next(".dp_tab_contents").children("#"+b+"_content").fadeIn()})}function verticalDropDownWidgetList(){if(!j$(".slider_fx")[0]){return}j$(".widget_categories.slider_fx ul.children, .widget_nav_menu.slider_fx ul.sub-menu, .widget_pages.slider_fx ul.children, .widget_mycategoryorder.slider_fx ul.children, .slider_fx .tab_category_content ul.children").prev("a").css("padding-right","34px").after('<span class="v_sub_menu_btn icon-plus2"></span>');j$(".v_sub_menu_btn").click(function(){j$(this).next("ul:animated").stop();if(j$(this).next("ul").is(":visible")){j$(this).addClass("icon-plus2");j$(this).removeClass("icon-minus2")}else{j$(this).addClass("icon-minus2");j$(this).removeClass("icon-plus2")}j$(this).next("ul:not(:animated)").slideToggle(200);return false})}function clickArchiveThumb(){j$(".loop-section.portfolio").find(".loop-article").click(function(){var a=j$(this).find("h1.loop-title a").attr("href");if(!a){a=j$(this).find("a").attr("href")}window.location=a})}function getAnchor(){j$(".recent_entries li,.dp_related_posts li").click(function(){window.location=j$(this).find(".item-link").attr("href")})}function imagesLoadedRun(c,d,b,a){if(!d){d=500}if(!a){a=600}j$(c).imagesLoaded(function(){j$(c).find("img").css("visibility","visible").animate({opacity:1},d,"easeOutQuart");if(b){setTimeout(function(){j$(b).css("visibility","visible").animate({opacity:1},a)},d,"easeOutQuart")}})}function masonryPosts(f,e,d,c,a,g){if(!a){a=2}if(!g){g="0.7s"}var b=f.masonry({itemSelector:e,columnWidth:container.querySelector(d)/a,percentPosition:true,gutter:c,isAnimated:true,isFitWidth:true,visibleStyle:{opacity:1},hiddenStyle:{opacity:0},transitionDuration:g});b.imagesLoaded(function(){b.masonry()});return b}j$(window).scroll(function(){var d=document.documentElement.scrollTop||document.body.scrollTop;var b=document.getElementById("container");var o=document.getElementById("banner_title");var c=j$("#header_container");var i=j$("#global_menu_ul > .menu-item");var h=j$(".header_content .h_group");var n=h.find(".hd_title");var f=h.find(".hd_title.txt");var e=h.find(".hd_title.img");var g=e.find("img");var q=h.find(".caption");var p=j$("#gotop");var a=j$("#footer").innerHeight();var j=j$(document).height()-(j$(window).height()+d)-200;if(b&&o){var k=j$(".header-banner-container");var m=getElementScreenPosition(b);var l=getElementScreenPosition(o);if(m.top<l.top){if(!k.hasClass("scrl_hide")){k.addClass("scrl_hide")}}else{if(k.hasClass("scrl_hide")){k.removeClass("scrl_hide")}}}if(d>100){c.addClass("scroll");i.addClass("min");i.children(".sub-menu").addClass("min");f.css("margin","15px 0 0");e.css("margin","10px 0 0");g.css("max-height","30px");q.addClass("hide")}else{c.removeClass("scroll");i.removeClass("min");i.children(".sub-menu").removeClass("min");if(f.hasClass("no-cap")){f.css("margin","28px 0 0")}else{f.css("margin","20px 0 0")}if(e.hasClass("no-cap")){e.css("margin","20px 0 0")}else{e.css("margin","15px 0 0")}g.css("max-height","35px");q.removeClass("hide")}if(d>300&&a<j){p.css("bottom","30px")}else{p.css("bottom","-40px")}});j$(window).load(function(){floatingWidget()});j$(window).resize(function(){resetGlobalMenu()});j$(document).ready(function(){dp_theme_noactivate_copyright();resetGlobalMenu();j$("#expand_float_menu i").click(function(){var n=j$("#global_menu_nav");var o=j$("#hd_misc_div");if(n.is(":animated")){n.stop()}if(n.is(":visible")){n.removeClass("show");if(thisWindow.width()<=768){o.hide()}}else{n.addClass("show");o.show()}});if(typeof Pace!=="undefined"){Pace.on("done",function(){j$(".header-banner-outer").addClass("pacedone")})}var l=j$("#header-banner-inner").find(".static_img, .sl-img"),j=l.width()/l.height();if(l[0]){l.imagesLoaded(function(){l.animate({opacity:1},2000,"easeOutQuart")})}function g(){if(isNaN(j)){j=l.width()/l.height()}if((thisWindow.width()/thisWindow.height())<j){l.removeClass("bg_w").addClass("bg_h")}else{l.removeClass("bg_h").addClass("bg_w")}}thisWindow.resize(g).trigger("resize");j$("body").fitVids({ignore:"#dpplayer"});var a=j$("#trackbacks_div"),i=j$("div.commentlist_div"),m=j$("#commentlist_div"),b=j$("div.trackbacks_div");j$("#commentlist_div").click(function(){j$(this).addClass("active_tab");j$(this).removeClass("inactive_tab");a.addClass("inactive_tab");a.removeClass("active_tab");if(!i.is(":visible")){i.fadeIn()}j$("div.trackbacks_div").hide()});j$("#trackbacks_div").click(function(){j$(this).addClass("active_tab");j$(this).removeClass("inactive_tab");m.addClass("inactive_tab");m.removeClass("active_tab");if(!b.is(":visible")){b.fadeIn()}j$("div.commentlist_div").hide()});dpTabWidget();verticalDropDownWidgetList();clickArchiveThumb();getAnchor();showToolTip(".tooltip",-75,25,true);showToolTip(".tagcloud a",-45,25,false);var h=".loop-div";var d=".loop-article";var e=".loop-article";var f=j$(".loop-section.portfolio:not(.slider)");var k=j$(".loop-section.magazine");var c="0.7s";if(f[0]){f.each(function(){var p=j$(this);var n=2;var o=0;if(p.hasClass("pt2")){o=".gutter_size"}if(p.hasClass("three_lines")){n=3}else{if(p.hasClass("four_lines")){n=4}}masonryPosts(p.find(h),d,e,o,n,c)})}if(k[0]){k.each(function(){var p=j$(this);var n=2;var o=".gutter_size";if(p.hasClass("three_lines")){n=3}else{if(p.hasClass("four_lines")){n=4}}masonryPosts(p.find(h),d,e,o,n,c)})}j$("#global_menu_ul").dropDown();j$("#gotop, #gotop-ft").click(function(){j$("body,html").animate({scrollTop:0},600,"easeOutQuart");return false})});