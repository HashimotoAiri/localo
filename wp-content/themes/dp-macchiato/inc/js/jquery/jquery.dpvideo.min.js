var player,DPEvents,options;(function(a){a.dpvideo=function(b){if(typeof b!=="object"){b={video:b}}var c=this;c.init=function(){c.options=a.extend({},a.dpvideo.options,b);if(c.options.video===null){c.options.video=c.options.source}c.setOptions();var f=c.options.target||a("body");var d=f[0]==a("body")[0]?"fixed":"absolute";f.css({position:"relative"});var g=c.options.controls===3?-999:"auto";if(DPEvents.utils.isMobile()){f.append('<div id="dpplayer" style="position:'+d+";left:0;top:0;overflow:hidden;z-index:"+g+';height:100%;width:100%;max-width:none;"></div>')}else{if(c.options.adproof===1){f.append('<div id="dpplayer" style="position:'+d+";left:-10%;top:-10%;overflow:hidden;z-index:"+g+';height:120%;width:120%;max-width:none;"></div>')}else{f.append('<div id="dpplayer" style="position:'+d+";left:0;top:0;overflow:hidden;z-index:"+g+';height:100%;width:100%;max-width:none;"></div>')}}if(c.options.playlist.list===null){if(c.options.video.provider==="youtube"){c.loadYouTubeAPI()}else{if(c.options.video.provider==="vimeo"){c.options.volume/=100;c.loadVimeoAPI()}}}else{c.loadYouTubeAPI()}a(window).on("resize.dpvideo",function(){e()});var e=function(){var n=a(window);var k=n.width(),i,h=n.height(),l,j=c.options,m=a("#dpplayer");if(k/j.ratio<h){i=Math.ceil(h*j.ratio);m.width(i).height(h).css({left:(k-i)/2,top:0})}else{l=Math.ceil(k/j.ratio);m.width(k).height(l).css({left:0,top:(h-l)/2})}}};c.setOptions=function(){for(var d in this.options){if(this.options[d]===true){this.options[d]=1}if(this.options[d]===false){this.options[d]=3}}if(c.options.playlist.list===null){c.options.video=c.determineProvider()}a(window).data("dpoptions",c.options)};c.loadYouTubeAPI=function(d){c.insertJS("//www.youtube.com/player_api")};c.loadYouTubePlaylist=function(){player.loadPlaylist(c.options.playlist.list,c.options.playlist.index,c.options.playlist.startSeconds,c.options.playlist.suggestedQuality)};c.loadVimeoAPI=function(){a("#dpplayer").replaceWith(function(){return'<iframe src="//player.vimeo.com/video/'+c.options.video.id+"?api=1&title=0&byline=0&portrait=0&playbar=0&loop="+c.options.loop+"&autoplay="+(c.options.autoplay===1?1:0)+'&player_id=dpplayer" frameborder="0" style="'+a(this).attr("style")+'visibility:hidden;background-color:black;" id="'+a(this).attr("id")+'"></iframe>'});c.insertJS("//origin-assets.vimeo.com/js/froogaloop2.min.js",function(){vimeoPlayerReady()})};c.insertJS=function(f,g){var d=document.createElement("script");if(g){if(d.readyState){d.onreadystatechange=function(){if(d.readyState==="loaded"||d.readyState==="complete"){d.onreadystatechange=null;g()}}}else{d.onload=function(){g()}}}d.src=f;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)};c.determineProvider=function(){var d=document.createElement("a");d.href=c.options.video;if(/youtube.com/.test(c.options.video)){return{provider:"youtube",id:d.href.slice(d.href.indexOf("v=")+2).toString()}}else{if(/vimeo.com/.test(c.options.video)){return{provider:"vimeo",id:d.href.split("/")[3].toString()}}else{if(/[-A-Za-z0-9_]+/.test(c.options.video)){var f=new String(c.options.video.match(/[-A-Za-z0-9_]+/));if(f.length==11){return{provider:"youtube",id:f.toString()}}else{for(var e=0;e<c.options.video.length;e++){if(typeof parseInt(c.options.video[e])!=="number"){throw"not vimeo but thought it was for a sec"}}return{provider:"vimeo",id:c.options.video}}}else{throw"dpvideo: Invalid video source"}}}};c.init()};a.dpvideo.options={source:null,video:null,playlist:{list:null,index:0,startSeconds:0,suggestedQuality:"default"},disableKeyControl:1,captions:0,loop:1,hd:1,volume:0,start:0,adproof:false,unstarted:null,onFinished:null,onReady:null,onPlay:null,onPause:null,buffering:null,controls:false,autoplay:true,annotations:true,cued:null,width:a(window).width(),ratio:16/9};a.fn.dpvideo=function(b){b.target=this;return this.each(function(){(new a.dpvideo(b))})}})(jQuery);function vimeoPlayerReady(){options=jQuery(window).data("dpoptions");var a=jQuery("#dpplayer")[0];player=$f(a);window.setTimeout(function(){jQuery("#dpplayer").css("visibility","visible")},2000);player.addEvent("ready",function(){DPEvents.v.onReady();if(DPEvents.utils.isMobile()){DPEvents.v.onPlay()}else{player.addEvent("play",DPEvents.v.onPlay);player.addEvent("pause",DPEvents.v.onPause);player.addEvent("finish",DPEvents.v.onFinish)}player.api("seekTo",options.start);player.api("setVolume",options.volume)})}function onYouTubePlayerAPIReady(){options=jQuery(window).data("dpoptions");player=new YT.Player("dpplayer",{videoId:options.video?options.video.id:null,playerVars:{autohide:1,autoplay:options.autoplay,disablekb:options.keyControls,cc_load_policy:options.captions,controls:options.controls,enablejsapi:1,fs:0,modestbranding:1,origin:window.location.origin||(window.location.protocol+"//"+window.location.hostname),iv_load_policy:options.annotations,loop:options.loop,showinfo:0,start:options.start,rel:0,wmode:"transparent",hd:options.hd},events:{onReady:DPEvents.yt.ready,onStateChange:DPEvents.yt.onStateChange,onError:DPEvents.yt.error}})}DPEvents={yt:{ready:function(a){a.target.setVolume(options.volume);if(options.autoplay===1){if(options.playlist.list){player.loadPlaylist(options.playlist.list,options.playlist.index,options.playlist.startSeconds,options.playlist.suggestedQuality)}else{a.target.playVideo()}}DPEvents.utils.isFunction(options.onReady)&&options.onReady()},onStateChange:function(a){switch(a.data){case -1:DPEvents.utils.isFunction(options.unstarted)&&options.unstarted();break;case 0:DPEvents.utils.isFunction(options.onFinished)&&options.onFinished();options.loop&&a.target.playVideo();break;case 1:DPEvents.utils.isFunction(options.onPlay)&&options.onPlay();break;case 2:DPEvents.utils.isFunction(options.onPause)&&options.onPause();break;case 3:DPEvents.utils.isFunction(options.buffering)&&options.buffering();break;case 5:DPEvents.utils.isFunction(options.cued)&&options.cued();break;default:throw"dpvideo: received invalid data from YT player."}},error:function(a){throw a}},v:{onReady:function(){DPEvents.utils.isFunction(options.onReady)&&options.onReady()},onPlay:function(){if(!DPEvents.utils.isMobile()){player.api("setVolume",options.volume)}DPEvents.utils.isFunction(options.onPlay)&&options.onPlay()},onPause:function(){DPEvents.utils.isFunction(options.onPause)&&options.onPause()},onFinish:function(){DPEvents.utils.isFunction(options.onFinish)&&options.onFinish()}},utils:{isFunction:function(a){if(typeof a==="function"){return true}else{return false}},isMobile:function(){if(navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)){return true}else{return false}}}};